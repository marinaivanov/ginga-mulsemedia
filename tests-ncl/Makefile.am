# Makefile.am -- Template for generating Makefile via Automake.
# Copyright (C) 2006-2018 PUC-Rio/Laboratorio TeleMidia
#
# This file is part of Ginga (Ginga-NCL).
#
# Ginga is free software: you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 2 of the License, or
# (at your option) any later version.
#
# Ginga is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
# or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
# License for more details.
#
# You should have received a copy of the GNU General Public License
# along with Ginga.  If not, see <https://www.gnu.org/licenses/>.

include $(top_srcdir)/build-aux/Makefile.am.common

BUILT_SOURCES= $(TEST_MIME) $(TEST_MEDIA)

TEST_MIME=
TEST_MIME+= test-mime-avi.ncl
TEST_MIME+= test-mime-nil.ncl
TEST_MIME+= test-mime-jpg.ncl
TEST_MIME+= test-mime-lua.ncl
TEST_MIME+= test-mime-mp3.ncl
TEST_MIME+= test-mime-mp4.ncl
TEST_MIME+= test-mime-ogg.ncl
TEST_MIME+= test-mime-ogv.ncl
TEST_MIME+= test-mime-png.ncl
TEST_MIME+= test-mime-svg.ncl
TEST_MIME+= test-mime-txt.ncl

TEST_MEDIA=
# empty
TEST_MEDIA+= test-media-aud-empty.ncl
TEST_MEDIA+= test-media-img-empty.ncl
TEST_MEDIA+= test-media-lua-empty.ncl
TEST_MEDIA+= test-media-nil-empty.ncl
TEST_MEDIA+= test-media-svg-empty.ncl
TEST_MEDIA+= test-media-txt-empty.ncl
TEST_MEDIA+= test-media-vid-empty.ncl
# no region
TEST_MEDIA+= test-media-aud-no-region.ncl
TEST_MEDIA+= test-media-img-no-region.ncl
TEST_MEDIA+= test-media-lua-no-region.ncl
TEST_MEDIA+= test-media-nil-no-region.ncl
TEST_MEDIA+= test-media-svg-no-region.ncl
TEST_MEDIA+= test-media-txt-no-region.ncl
TEST_MEDIA+= test-media-vid-no-region.ncl
# nested region
TEST_MEDIA+= test-media-aud-nested-region.ncl
TEST_MEDIA+= test-media-img-nested-region.ncl
TEST_MEDIA+= test-media-lua-nested-region.ncl
TEST_MEDIA+= test-media-nil-nested-region.ncl
TEST_MEDIA+= test-media-svg-nested-region.ncl
TEST_MEDIA+= test-media-txt-nested-region.ncl
TEST_MEDIA+= test-media-vid-nested-region.ncl
# no descriptor
TEST_MEDIA+= test-media-aud-no-desc.ncl
TEST_MEDIA+= test-media-img-no-desc.ncl
TEST_MEDIA+= test-media-lua-no-desc.ncl
TEST_MEDIA+= test-media-nil-no-desc.ncl
TEST_MEDIA+= test-media-svg-no-desc.ncl
TEST_MEDIA+= test-media-txt-no-desc.ncl
TEST_MEDIA+= test-media-vid-no-desc.ncl
# property: left, right, top, width, height, location, size, and bounds.
TEST_MEDIA+= test-media-aud-dimensions.ncl
TEST_MEDIA+= test-media-img-dimensions.ncl
TEST_MEDIA+= test-media-lua-dimensions.ncl
TEST_MEDIA+= test-media-nil-dimensions.ncl
TEST_MEDIA+= test-media-svg-dimensions.ncl
TEST_MEDIA+= test-media-txt-dimensions.ncl
TEST_MEDIA+= test-media-vid-dimensions.ncl
TEST_MEDIA+= test-media-aud-4grid.ncl
TEST_MEDIA+= test-media-img-4grid.ncl
TEST_MEDIA+= test-media-lua-4grid.ncl
TEST_MEDIA+= test-media-nil-4grid.ncl
TEST_MEDIA+= test-media-svg-4grid.ncl
TEST_MEDIA+= test-media-txt-4grid.ncl
TEST_MEDIA+= test-media-vid-4grid.ncl
# property: explicitDur
TEST_MEDIA+= test-media-aud-explicitDur.ncl
TEST_MEDIA+= test-media-img-explicitDur.ncl
TEST_MEDIA+= test-media-lua-explicitDur.ncl
TEST_MEDIA+= test-media-nil-explicitDur.ncl
TEST_MEDIA+= test-media-svg-explicitDur.ncl
TEST_MEDIA+= test-media-txt-explicitDur.ncl
TEST_MEDIA+= test-media-vid-explicitDur.ncl
# property: focusIndex
TEST_MEDIA+= test-media-aud-focusIndex.ncl
TEST_MEDIA+= test-media-img-focusIndex.ncl
TEST_MEDIA+= test-media-lua-focusIndex.ncl
TEST_MEDIA+= test-media-nil-focusIndex.ncl
TEST_MEDIA+= test-media-svg-focusIndex.ncl
TEST_MEDIA+= test-media-txt-focusIndex.ncl
TEST_MEDIA+= test-media-vid-focusIndex.ncl
# property: transparency
TEST_MEDIA+= test-media-aud-transparency.ncl
TEST_MEDIA+= test-media-img-transparency.ncl
TEST_MEDIA+= test-media-lua-transparency.ncl
TEST_MEDIA+= test-media-nil-transparency.ncl
TEST_MEDIA+= test-media-svg-transparency.ncl
TEST_MEDIA+= test-media-txt-transparency.ncl
TEST_MEDIA+= test-media-vid-transparency.ncl
# property: visible
TEST_MEDIA+= test-media-aud-visible.ncl
TEST_MEDIA+= test-media-img-visible.ncl
TEST_MEDIA+= test-media-lua-visible.ncl
TEST_MEDIA+= test-media-nil-visible.ncl
TEST_MEDIA+= test-media-svg-visible.ncl
TEST_MEDIA+= test-media-txt-visible.ncl
TEST_MEDIA+= test-media-vid-visible.ncl
# property: visible
TEST_MEDIA+= test-media-aud-zIndex.ncl
TEST_MEDIA+= test-media-img-zIndex.ncl
TEST_MEDIA+= test-media-lua-zIndex.ncl
TEST_MEDIA+= test-media-nil-zIndex.ncl
TEST_MEDIA+= test-media-svg-zIndex.ncl
TEST_MEDIA+= test-media-txt-zIndex.ncl
TEST_MEDIA+= test-media-vid-zIndex.ncl
# link: loop
TEST_MEDIA+= test-media-aud-loop.ncl
TEST_MEDIA+= test-media-img-loop.ncl
TEST_MEDIA+= test-media-lua-loop.ncl
TEST_MEDIA+= test-media-nil-loop.ncl
TEST_MEDIA+= test-media-svg-loop.ncl
TEST_MEDIA+= test-media-txt-loop.ncl
TEST_MEDIA+= test-media-vid-loop.ncl
# link: stop self
TEST_MEDIA+= test-media-aud-stop-self.ncl
TEST_MEDIA+= test-media-img-stop-self.ncl
TEST_MEDIA+= test-media-lua-stop-self.ncl
TEST_MEDIA+= test-media-nil-stop-self.ncl
TEST_MEDIA+= test-media-svg-stop-self.ncl
TEST_MEDIA+= test-media-txt-stop-self.ncl
TEST_MEDIA+= test-media-vid-stop-self.ncl
# link: animation on background color
TEST_MEDIA+= test-media-aud-anim-background.ncl
TEST_MEDIA+= test-media-img-anim-background.ncl
TEST_MEDIA+= test-media-lua-anim-background.ncl
TEST_MEDIA+= test-media-nil-anim-background.ncl
TEST_MEDIA+= test-media-svg-anim-background.ncl
TEST_MEDIA+= test-media-txt-anim-background.ncl
TEST_MEDIA+= test-media-vid-anim-background.ncl
# link: animation on width and height
TEST_MEDIA+= test-media-aud-anim-dimensions.ncl
TEST_MEDIA+= test-media-img-anim-dimensions.ncl
TEST_MEDIA+= test-media-lua-anim-dimensions.ncl
TEST_MEDIA+= test-media-nil-anim-dimensions.ncl
TEST_MEDIA+= test-media-svg-anim-dimensions.ncl
TEST_MEDIA+= test-media-txt-anim-dimensions.ncl
TEST_MEDIA+= test-media-vid-anim-dimensions.ncl
# link: animation on transparency
TEST_MEDIA+= test-media-aud-anim-transparency.ncl
TEST_MEDIA+= test-media-img-anim-transparency.ncl
TEST_MEDIA+= test-media-lua-anim-transparency.ncl
TEST_MEDIA+= test-media-nil-anim-transparency.ncl
TEST_MEDIA+= test-media-svg-anim-transparency.ncl
TEST_MEDIA+= test-media-txt-anim-transparency.ncl
TEST_MEDIA+= test-media-vid-anim-transparency.ncl

CLEANFILES+= $(TEST_MIME)
$(TEST_MIME): test-mime*.ncl.in
	$(AM_V_GEN)\
	type=`basename $@ | sed 's,test-mime-\([a-z0-9]*\)\.ncl,\1,g'`;\
	case $$type in\
	  avi) src="samples/night.avi";;\
	  jpg) src="samples/felis.jpg";;\
	  lua) src="samples/fps.lua";;\
	  mp3) src="samples/bunny.mp3";;\
	  nil) src="";;\
	  mp4) src="samples/small.mp4";;\
	  ogg) src="samples/bunny.ogg";;\
	  ogv) src="samples/clock.ogv";;\
	  png) src="samples/gnu.png";;\
	  svg) src="samples/vector.svg";;\
	  txt) src="samples/text.txt";;\
	    *) exit 1;;\
	esac;\
	sed -e "s,@SRC@,$$src,g" "test-mime.ncl.in" >$@

CLEANFILES+= $(TEST_MEDIA)
$(TEST_MEDIA): test-media-*.ncl.in
	$(AM_V_GEN)\
	type=`basename $@ | sed 's,test-media-\([a-z0-9]*\).*,\1,g'`;\
	suffix=`basename $@ | sed 's,test-media-[a-z0-9]*-\(.*\)\.ncl,\1,g'`;\
	case $$type in\
	  aud) src="samples/arcade.mp3";;\
	  img) src="samples/gnu.png";;\
	  lua) src="samples/fps.lua";;\
	  nil) src="";;\
	  svg) src="samples/vector.svg";;\
	  txt) src="samples/text.txt";;\
	  vid) src="samples/clock.ogv";;\
	    *) exit 1;;\
	esac;\
	src_remote="http://raw.github.com/telemidia/ginga/master//tests-ncl/$$src";\
	sed -e "s,@SRC@,$$src,gi;s,@SRC_REMOTE@,"$$src_remote",gi"\
         "test-media-$$suffix.ncl.in" >$@
